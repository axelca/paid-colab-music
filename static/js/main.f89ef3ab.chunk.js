(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,a,t){e.exports=t(36)},29:function(e,a,t){},31:function(e,a,t){},36:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(8),s=t.n(i),l=(t(29),t(12)),c=t(4),o=t(13),u=t(14),m=t(16),p=t(19),h=t.n(p),g=t(47),d=t(10),v=t(15),f=t.n(v),b=(t(31),new h.a),y=Object(d.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus,&:hover,&$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(g.a),k=function(e){function a(){var e;Object(l.a)(this,a),(e=Object(o.a)(this,Object(u.a)(a).call(this))).getHashParams=function(){var e,a={},t=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=t.exec(n);e;)a[e[1]]=decodeURIComponent(e[2]),e=t.exec(n);return a},e.getNowPlaying=function(){b.getMyCurrentPlaybackState().then((function(a){e.setState({nowPlaying:{name:a.item.name,albumArt:a.item.album.images[0].url}})}))},e.getPlaylists=function(){b.getUserPlaylists({limit:1}).then((function(a){e.setState({playlists:a.items})}),(function(e){console.error(e)}))},e.componentDidMount=function(){e.getPlaylists()},e.handleChangevalence=function(a,t){e.setState({params:f()(e.state.params,{valence:{$set:t/100}})})},e.handleChangeEnergy=function(a,t){e.setState({params:f()(e.state.params,{energy:{$set:t/100}})})},e.handleChangeRange=function(a,t){e.setState({params:f()(e.state.params,{range:{$set:t/100}})})};var t=e.getHashParams().access_token;return t&&b.setAccessToken(t),e.state={loggedIn:!!t,nowPlaying:{name:"Not Checked",albumArt:""},playlists:[],params:{energy:1,valence:1,range:.1}},e}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("a",{href:"http://localhost:8888"}," Login to Spotify "),r.a.createElement("div",{className:"sliders"},r.a.createElement("label",null,"valence:",r.a.createElement(y,{valueLabelDisplay:"auto","aria-label":"pretto slider",defaultValue:100*this.state.params.valence,onChange:this.handleChangevalence,min:3,max:100})),r.a.createElement("label",null,"Energy:",r.a.createElement(y,{valueLabelDisplay:"auto","aria-label":"pretto slider",defaultValue:100*this.state.params.energy,onChange:this.handleChangeEnergy,min:35,max:100})),r.a.createElement("label",null,"Range:",r.a.createElement(y,{valueLabelDisplay:"auto","aria-label":"pretto slider",defaultValue:100*this.state.params.range,onChange:this.handleChangeRange,min:10,max:100,step:10}))),r.a.createElement(E,{data:this.state.playlists,params:this.state.params}))}}]),a}(n.Component),E=function(e){return e.data.map((function(a){return r.a.createElement(C,{key:a.id,playlist:a,params:e.params})}))},C=function(e){function a(){var e;return Object(l.a)(this,a),(e=Object(o.a)(this,Object(u.a)(a).call(this))).getTracks=function(){b.getPlaylistTracks(e.props.playlist.id).then((function(a){e.setState((function(e){return{active:!e.active,tracks:a.items}}))}),(function(e){console.error(e)}))},e.state={active:!1,tracks:[]},e}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this,a=this.props.playlist,t=this.state,n=t.active,i=t.tracks;return r.a.createElement("div",null,r.a.createElement("div",{onClick:this.getTracks,className:n?"playlist active":"playlist"},a.name),n&&r.a.createElement("div",null,i.map((function(t,n){return r.a.createElement(j,{key:n,data:t,playlist:a,params:e.props.params})}))))}}]),a}(n.Component),j=function(e){function a(){var e;return Object(l.a)(this,a),(e=Object(o.a)(this,Object(u.a)(a).call(this))).handleClick=function(){b.play({uris:[e.props.data.track.uri]}),e.setState((function(e){return{active:!e.active}}))},e.getTrackMeta=function(a){b.getAudioFeaturesForTrack(a).then((function(a){e.setState({data:a})}),(function(e){console.error(e)}))},e.componentDidMount=function(){e.getTrackMeta(e.props.data.track.id)},e.inRange=function(e,a,t){return e>=a-t&&e<=a+t},e.isAvailable=function(){var a=e.state.data,t=a.valence,n=a.energy,r=e.props.params,i=r.valence,s=r.energy,l=r.range;e.inRange(t,i,l)&&e.inRange(n,s,l)?e.setState({available:!0}):e.setState({available:!1})},e.state={available:!1,data:{}},e}return Object(m.a)(a,e),Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.params.valence===e.params.valence&&this.props.params.energy===e.params.energy&&this.props.params.range===e.params.range||this.isAvailable()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.data.track,a=e.name,t=e.artists,n=e.album,i=this.state.available;return r.a.createElement("div",{onClick:this.handleClick,className:i?"track available":"track"},r.a.createElement("div",{className:"info"},r.a.createElement("img",{src:n.images[2].url}),t[0].name," - ",a),r.a.createElement("div",{className:"meta"},"Energy: ",this.state.data.energy,", valence: ",this.state.data.valence))}}]),a}(n.Component),w=k;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.f89ef3ab.chunk.js.map